<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.45">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/icon/111.ico"><title>Dubbo | shAilene</title><meta name="description" content="just be simple.">
    <link rel="modulepreload" href="/study/assets/app.4e5a7100.js"><link rel="modulepreload" href="/study/assets/dubbo.html.faf3ca04.js"><link rel="modulepreload" href="/study/assets/dubbo.html.54518c15.js"><link rel="prefetch" href="/study/assets/index.html.cc085cf1.js"><link rel="prefetch" href="/study/assets/index.html.763c73a0.js"><link rel="prefetch" href="/study/assets/index.html.074760ca.js"><link rel="prefetch" href="/study/assets/index.html.ff759a47.js"><link rel="prefetch" href="/study/assets/index.html.dde20e30.js"><link rel="prefetch" href="/study/assets/index.html.f18f6eeb.js"><link rel="prefetch" href="/study/assets/index.html.3b4ee2ac.js"><link rel="prefetch" href="/study/assets/设计模式1.html.d254a4fb.js"><link rel="prefetch" href="/study/assets/设计模式2.html.c1bb479a.js"><link rel="prefetch" href="/study/assets/gin.html.d64dfd47.js"><link rel="prefetch" href="/study/assets/golang.html.16099e4e.js"><link rel="prefetch" href="/study/assets/gorm.html.18769af2.js"><link rel="prefetch" href="/study/assets/Javaweb.html.6822767e.js"><link rel="prefetch" href="/study/assets/docker.html.5ab0d932.js"><link rel="prefetch" href="/study/assets/ES.html.79218e9b.js"><link rel="prefetch" href="/study/assets/kafka.html.9d038d97.js"><link rel="prefetch" href="/study/assets/vue基础.html.e141ee41.js"><link rel="prefetch" href="/study/assets/vue组件.html.4748d6a7.js"><link rel="prefetch" href="/study/assets/一些知识点的记录.html.798adcda.js"><link rel="prefetch" href="/study/assets/Java笔记.html.3daff183.js"><link rel="prefetch" href="/study/assets/springcloud（上）.html.f9694838.js"><link rel="prefetch" href="/study/assets/springcloud（下）.html.8ddee628.js"><link rel="prefetch" href="/study/assets/zookeeper.html.5728d718.js"><link rel="prefetch" href="/study/assets/《并发编程的艺术》笔记.html.096bbe6f.js"><link rel="prefetch" href="/study/assets/并发编程.html.4e11253b.js"><link rel="prefetch" href="/study/assets/尚硅谷_宋红康_JDBC.html.4b7a32bc.js"><link rel="prefetch" href="/study/assets/redis.html.098d7b82.js"><link rel="prefetch" href="/study/assets/Mybatis.html.bef8c38c.js"><link rel="prefetch" href="/study/assets/spring.html.728ddcf2.js"><link rel="prefetch" href="/study/assets/springboot.html.515b4e7b.js"><link rel="prefetch" href="/study/assets/springboot.html.74edc301.js"><link rel="prefetch" href="/study/assets/springMVC.html.43a301bd.js"><link rel="prefetch" href="/study/assets/RabbitMQ.html.9428006f.js"><link rel="prefetch" href="/study/assets/操作系统.html.ddd809ec.js"><link rel="prefetch" href="/study/assets/flink基本篇1.html.585b5f0e.js"><link rel="prefetch" href="/study/assets/flink基本篇2.html.6e89c1e9.js"><link rel="prefetch" href="/study/assets/MySQL数据库笔记-第一部分.html.5c5c9afa.js"><link rel="prefetch" href="/study/assets/MySQL数据库笔记-第二部分.html.62932cc9.js"><link rel="prefetch" href="/study/assets/404.html.93146c89.js"><link rel="prefetch" href="/study/assets/index.html.9941bc88.js"><link rel="prefetch" href="/study/assets/index.html.ba4d5cb6.js"><link rel="prefetch" href="/study/assets/index.html.92c2648f.js"><link rel="prefetch" href="/study/assets/index.html.275631af.js"><link rel="prefetch" href="/study/assets/index.html.dce06860.js"><link rel="prefetch" href="/study/assets/index.html.12c7d9e3.js"><link rel="prefetch" href="/study/assets/index.html.64017171.js"><link rel="prefetch" href="/study/assets/设计模式1.html.f9509174.js"><link rel="prefetch" href="/study/assets/设计模式2.html.1448346a.js"><link rel="prefetch" href="/study/assets/gin.html.e84e137e.js"><link rel="prefetch" href="/study/assets/golang.html.9f2a4ad8.js"><link rel="prefetch" href="/study/assets/gorm.html.29c23928.js"><link rel="prefetch" href="/study/assets/Javaweb.html.b8b69904.js"><link rel="prefetch" href="/study/assets/docker.html.f9b87572.js"><link rel="prefetch" href="/study/assets/ES.html.e50fa5be.js"><link rel="prefetch" href="/study/assets/kafka.html.bf129f92.js"><link rel="prefetch" href="/study/assets/vue基础.html.632361f6.js"><link rel="prefetch" href="/study/assets/vue组件.html.99d0cd49.js"><link rel="prefetch" href="/study/assets/一些知识点的记录.html.4d54b2ed.js"><link rel="prefetch" href="/study/assets/Java笔记.html.94eb4cc9.js"><link rel="prefetch" href="/study/assets/springcloud（上）.html.c74a33f2.js"><link rel="prefetch" href="/study/assets/springcloud（下）.html.2efcab09.js"><link rel="prefetch" href="/study/assets/zookeeper.html.b129f230.js"><link rel="prefetch" href="/study/assets/《并发编程的艺术》笔记.html.3629803c.js"><link rel="prefetch" href="/study/assets/并发编程.html.4dbc83ff.js"><link rel="prefetch" href="/study/assets/尚硅谷_宋红康_JDBC.html.7a23c582.js"><link rel="prefetch" href="/study/assets/redis.html.fa43852e.js"><link rel="prefetch" href="/study/assets/Mybatis.html.319d9304.js"><link rel="prefetch" href="/study/assets/spring.html.08488cf6.js"><link rel="prefetch" href="/study/assets/springboot.html.7dea3ce4.js"><link rel="prefetch" href="/study/assets/springboot.html.ac553e9e.js"><link rel="prefetch" href="/study/assets/springMVC.html.bcee5852.js"><link rel="prefetch" href="/study/assets/RabbitMQ.html.68fd4ad6.js"><link rel="prefetch" href="/study/assets/操作系统.html.7226aca8.js"><link rel="prefetch" href="/study/assets/flink基本篇1.html.26f7d4ae.js"><link rel="prefetch" href="/study/assets/flink基本篇2.html.c7d8048a.js"><link rel="prefetch" href="/study/assets/MySQL数据库笔记-第一部分.html.3e94b54b.js"><link rel="prefetch" href="/study/assets/MySQL数据库笔记-第二部分.html.27393be1.js"><link rel="prefetch" href="/study/assets/404.html.085ef4ab.js"><link rel="prefetch" href="/study/assets/404.65bb6fca.js"><link rel="prefetch" href="/study/assets/Layout.a12f3a75.js">
    <link rel="stylesheet" href="/study/assets/style.2bba04cf.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/study/" class=""><img class="logo" src="/study/images/leo.jpg" alt="shAilene"><span class="site-name can-hide">shAilene</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/study/计算机基础/" class="" aria-label="计算机基础"><!--[--><!--]--> 计算机基础 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/study/java/" class="router-link-active" aria-label="Java"><!--[--><!--]--> Java <!--[--><!--]--></a></div><div class="navbar-item"><a href="/study/go/" class="" aria-label="Go"><!--[--><!--]--> Go <!--[--><!--]--></a></div><div class="navbar-item"><a href="/study/python/" class="" aria-label="Python"><!--[--><!--]--> Python <!--[--><!--]--></a></div><div class="navbar-item"><a href="/study/mw/" class="" aria-label="中间件"><!--[--><!--]--> 中间件 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/study/Design-patterns/" class="" aria-label="设计模式"><!--[--><!--]--> 设计模式 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/study/前端/" class="" aria-label="前端"><!--[--><!--]--> 前端 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/study/计算机基础/" class="" aria-label="计算机基础"><!--[--><!--]--> 计算机基础 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/study/java/" class="router-link-active" aria-label="Java"><!--[--><!--]--> Java <!--[--><!--]--></a></div><div class="navbar-item"><a href="/study/go/" class="" aria-label="Go"><!--[--><!--]--> Go <!--[--><!--]--></a></div><div class="navbar-item"><a href="/study/python/" class="" aria-label="Python"><!--[--><!--]--> Python <!--[--><!--]--></a></div><div class="navbar-item"><a href="/study/mw/" class="" aria-label="中间件"><!--[--><!--]--> 中间件 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/study/Design-patterns/" class="" aria-label="设计模式"><!--[--><!--]--> 设计模式 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/study/前端/" class="" aria-label="前端"><!--[--><!--]--> 前端 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Dubbo <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#第1章-远程调用" class="router-link-active router-link-exact-active sidebar-item" aria-label="第1章 远程调用"><!--[--><!--]--> 第1章 远程调用 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#概述" class="router-link-active router-link-exact-active sidebar-item" aria-label="概述"><!--[--><!--]--> 概述 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#rpc协议" class="router-link-active router-link-exact-active sidebar-item" aria-label="RPC协议"><!--[--><!--]--> RPC协议 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#rpc是什么" class="router-link-active router-link-exact-active sidebar-item" aria-label="RPC是什么？"><!--[--><!--]--> RPC是什么？ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#rpc的作用" class="router-link-active router-link-exact-active sidebar-item" aria-label="RPC的作用"><!--[--><!--]--> RPC的作用 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#分布式" class="router-link-active router-link-exact-active sidebar-item" aria-label="分布式"><!--[--><!--]--> 分布式 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#第2章-dubbo" class="router-link-active router-link-exact-active sidebar-item" aria-label="第2章 Dubbo"><!--[--><!--]--> 第2章 Dubbo <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#dubbo介绍" class="router-link-active router-link-exact-active sidebar-item" aria-label="Dubbo介绍"><!--[--><!--]--> Dubbo介绍 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#dubbo服务的实现原理" class="router-link-active router-link-exact-active sidebar-item" aria-label="Dubbo服务的实现原理"><!--[--><!--]--> Dubbo服务的实现原理 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#dubbo支持的协议" class="router-link-active router-link-exact-active sidebar-item" aria-label="Dubbo支持的协议"><!--[--><!--]--> Dubbo支持的协议 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#dubbo协议" class="router-link-active router-link-exact-active sidebar-item" aria-label="dubbo协议"><!--[--><!--]--> dubbo协议 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#长连接和短连接" class="router-link-active router-link-exact-active sidebar-item" aria-label="长连接和短连接"><!--[--><!--]--> 长连接和短连接 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#dubbo的组件" class="router-link-active router-link-exact-active sidebar-item" aria-label="Dubbo的组件"><!--[--><!--]--> Dubbo的组件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#使用dubbo的第一个项目" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用Dubbo的第一个项目"><!--[--><!--]--> 使用Dubbo的第一个项目 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#使用接口作为独立项目" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用接口作为独立项目"><!--[--><!--]--> 使用接口作为独立项目 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#dubbo常用标签" class="router-link-active router-link-exact-active sidebar-item" aria-label="Dubbo常用标签"><!--[--><!--]--> Dubbo常用标签 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#概述-1" class="router-link-active router-link-exact-active sidebar-item" aria-label="概述"><!--[--><!--]--> 概述 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#公用标签" class="router-link-active router-link-exact-active sidebar-item" aria-label="公用标签"><!--[--><!--]--> 公用标签 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#服务提供者标签" class="router-link-active router-link-exact-active sidebar-item" aria-label="服务提供者标签"><!--[--><!--]--> 服务提供者标签 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#服务消费者标签" class="router-link-active router-link-exact-active sidebar-item" aria-label="服务消费者标签"><!--[--><!--]--> 服务消费者标签 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#常用配置属性" class="router-link-active router-link-exact-active sidebar-item" aria-label="常用配置属性"><!--[--><!--]--> 常用配置属性 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#check" class="router-link-active router-link-exact-active sidebar-item" aria-label="check"><!--[--><!--]--> check <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#请求重试retries" class="router-link-active router-link-exact-active sidebar-item" aria-label="请求重试retries"><!--[--><!--]--> 请求重试retries <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#第3章-注册中心" class="router-link-active router-link-exact-active sidebar-item" aria-label="第3章 注册中心"><!--[--><!--]--> 第3章 注册中心 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#概述-2" class="router-link-active router-link-exact-active sidebar-item" aria-label="概述"><!--[--><!--]--> 概述 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#zookeeper概述" class="router-link-active router-link-exact-active sidebar-item" aria-label="zookeeper概述"><!--[--><!--]--> zookeeper概述 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#zookeeper使用" class="router-link-active router-link-exact-active sidebar-item" aria-label="zookeeper使用"><!--[--><!--]--> zookeeper使用 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#服务提供者" class="router-link-active router-link-exact-active sidebar-item" aria-label="服务提供者"><!--[--><!--]--> 服务提供者 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#服务消费者" class="router-link-active router-link-exact-active sidebar-item" aria-label="服务消费者"><!--[--><!--]--> 服务消费者 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#第4章-监控中心" class="router-link-active router-link-exact-active sidebar-item" aria-label="第4章 监控中心"><!--[--><!--]--> 第4章 监控中心 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#概述-3" class="router-link-active router-link-exact-active sidebar-item" aria-label="概述"><!--[--><!--]--> 概述 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#步骤" class="router-link-active router-link-exact-active sidebar-item" aria-label="步骤"><!--[--><!--]--> 步骤 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#第5章-负载均衡" class="router-link-active router-link-exact-active sidebar-item" aria-label="第5章 负载均衡"><!--[--><!--]--> 第5章 负载均衡 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#概述-4" class="router-link-active router-link-exact-active sidebar-item" aria-label="概述"><!--[--><!--]--> 概述 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#dubbo负载均衡" class="router-link-active router-link-exact-active sidebar-item" aria-label="Dubbo负载均衡"><!--[--><!--]--> Dubbo负载均衡 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#概述-5" class="router-link-active router-link-exact-active sidebar-item" aria-label="概述"><!--[--><!--]--> 概述 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#ramdom-loadbalance" class="router-link-active router-link-exact-active sidebar-item" aria-label="Ramdom LoadBalance"><!--[--><!--]--> Ramdom LoadBalance <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#roundrobin-loadbalance" class="router-link-active router-link-exact-active sidebar-item" aria-label="RoundRobin LoadBalance"><!--[--><!--]--> RoundRobin LoadBalance <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#leastactive-loadbalance" class="router-link-active router-link-exact-active sidebar-item" aria-label="LeastActive LoadBalance"><!--[--><!--]--> LeastActive LoadBalance <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#consistencehash-loadbalance" class="router-link-active router-link-exact-active sidebar-item" aria-label="ConsistenceHash LoadBalance"><!--[--><!--]--> ConsistenceHash LoadBalance <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/study/java/%E5%88%86%E5%B8%83%E5%BC%8F/RPC%E6%A1%86%E6%9E%B6-dubbo/dubbo.html#配置方式" class="router-link-active router-link-exact-active sidebar-item" aria-label="配置方式"><!--[--><!--]--> 配置方式 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="dubbo" tabindex="-1"><a class="header-anchor" href="#dubbo" aria-hidden="true">#</a> Dubbo</h1><h2 id="第1章-远程调用" tabindex="-1"><a class="header-anchor" href="#第1章-远程调用" aria-hidden="true">#</a> 第1章 远程调用</h2><h3 id="概述" tabindex="-1"><a class="header-anchor" href="#概述" aria-hidden="true">#</a> 概述</h3><ol><li><p>单一应用的优点：开发相对简单</p><p>单一应用的缺点：部署上和后期的开发维护上，比较麻烦，优化较麻烦。</p></li><li><p>微服务：</p><p>一个大的单体应用拆分成很多小的服务，这每一个小的服务都是一个应用。这就叫微服务</p><p>每个服务都是单一的，小的，而且可运行的，每个服务可以部署在不同的服务器上，这叫微服务。</p><p>分布式：</p><p>这些小的应用分别部署在不同的服务器上，在服务器端，这些不同的服务器构成了一个结构，一个网络，这就叫分布式的结构，这就是服务器集群，集群是多个服务器，是一种物理形态，分布式则是一种思想。</p><p>这多个服务器作为一个整体向用户提供功能。</p><p>由多台服务器共同完成一件比较复杂的事，可以理解为分布式</p><p>这种分布式的结构，多台服务器，对用户而言是一个整体。</p><p>总结：</p><p><strong>微服务的开发模式，分布式的部署</strong></p></li><li><p>部署在不同服务器上的不同应用之间，避免不了互相调用的功能</p><p>servlet之间的调用是通过http协议进行调用，是比较慢的。</p><p>怎么方便地进行微服务之间的调用和访问的呢?</p><p>dubbo框架。</p></li></ol><h3 id="rpc协议" tabindex="-1"><a class="header-anchor" href="#rpc协议" aria-hidden="true">#</a> RPC协议</h3><h4 id="rpc是什么" tabindex="-1"><a class="header-anchor" href="#rpc是什么" aria-hidden="true">#</a> RPC是什么？</h4><ol><li><p>协议指多方共同遵循的规范，在网络上的计算机进行数据交换依靠各种协议，例如http、ftp等。</p></li><li><p>一台计算机按规定好的格式发送数据，另一台计算的程序按指定的格式接收数据，两台计算机或者说服务器使用互相理解的格式读写数据，达到数据交换的目的。</p></li><li><p>RPC是Remote Procedure Call Protocol，即远程过程调用协议。是一种通过网络从远程计算机程序请求服务，而不需要了解底层网络技术的协议。该协议允许运行于一台计算机的程序调用另一台计算机的程序。程序员无需编写网络交互的功能代码。</p><p>简而言之，RPC协议是实现分布式环境中，不同服务之间或者说服务器之间的相互调用的协议。</p><p>RPC协议定义了底层的服务器之间数据交换的方式和调用的处理逻辑等。</p></li><li><p>RPC里面还有很多子协议。</p></li></ol><h4 id="rpc的作用" tabindex="-1"><a class="header-anchor" href="#rpc的作用" aria-hidden="true">#</a> RPC的作用</h4><ol><li><p>主要功能是让构建分布式计算（应用）更容易，在提供强大的远程调用能力时不损失本地调用的语义简洁性，在一台计算机的程序使用其他计算机上的功能就像使用自己的功能一样。</p><p>RPC技术提供了透明的访问其他服务的底层实现细节，使用分布式系统中的服务更加方便。</p></li></ol><h4 id="分布式" tabindex="-1"><a class="header-anchor" href="#分布式" aria-hidden="true">#</a> 分布式</h4><ol><li><p>分布式指多台计算机（服务器）位于网络系统中，多台计算机形成一个整体对外界提供服务。用户使用系统不知道是多台计算机在使用不同的操作系统，不同的应用程序提供服务。</p></li><li><p>集群是一种物理结构，而分布式是一种思想，不同的单一的应用部署在不同的服务器上，这些不同的服务器又作为一个整体对外提供服务，这叫做分布式的结构。</p><p>分布式强调部署，微服务强调开发。</p></li><li><p>RPC让分布式地开发模式更简单。</p></li></ol><h2 id="第2章-dubbo" tabindex="-1"><a class="header-anchor" href="#第2章-dubbo" aria-hidden="true">#</a> 第2章 Dubbo</h2><h3 id="dubbo介绍" tabindex="-1"><a class="header-anchor" href="#dubbo介绍" aria-hidden="true">#</a> Dubbo介绍</h3><ol><li><p>是国内的阿里公司开源的。</p><p>是一个高性能的RPC框架。</p><p>既然是RPC框架，那么就说明我们可以通过dubbo框架来做分布式、微服务的开发。</p></li><li><p>Dubbo框架的组成部分</p><ul><li>spring容器</li><li>服务提供者（提供服务的）</li><li>服务的消费者（用其他服务器提供的服务的）</li><li>注册中心---用来管理dubbo服务者和消费者的</li><li>监控中心---监控记录服务提供者和消费者的调用情况的。</li></ul><p><img src="/study/assets/image-20220107145037242.87152ef2.png" alt="image-20220107145037242"></p></li><li><p>架构介绍</p><ul><li><p>单一应用架构</p><p>当网站流量很少时，只需一个应用，将所有的功能部署在一起，以减少部署节点和成本，此时，用于简化增删改查工作量的数据访问框架（ORM）是关键。</p></li><li><p>垂直应用架构</p><p>当访问量逐渐增大，单一应用增加机器带来的加速度越来越小，将应用拆分成互不相干的几个应用以提升效率，此时，用于加速前端页面开发的web框架（MVC）是关键</p></li><li><p>分布式服务架构</p><p>当垂直应用越来越多，应用之间交互不可避免，将核心业务抽取出来，作为独立的服务，逐渐形成稳定的服务中心，使前端应用能快速地响应多变的市场需求，此时，用于提高业务复用及整合的分布式服务框架（RPC）是关键。</p></li></ul></li><li><p>dubbo能做什么?---3个主要功能。</p><ul><li>实现透明的远程方法调用，就像调用本地方法一样，可以忽略远程调用的实现细节。简单配置即可使用。</li><li>服务的自动注册和服务发现，通过注册中心，服务实现动态管理（增减服务方），调用服务的消费者无需写死调用地址。</li><li>软件的负载均衡和容错机制，无需使用硬件，降低成本。</li></ul></li></ol><h3 id="dubbo服务的实现原理" tabindex="-1"><a class="header-anchor" href="#dubbo服务的实现原理" aria-hidden="true">#</a> Dubbo服务的实现原理</h3><ol><li><p>Dubbo的底层实现是通过动态代理，由Dubbo框架创建远程服务（接口）对象的代理对象，通过代理对象调用远程方法。</p><p><img src="/study/assets/image-20220107150819280.4feb5d88.png" alt="image-20220107150819280"></p><p>消费者A调用服务器B的服务，首先是通过网络，因为A的程序和B的程序是运行在不同的服务器上，也就是A应用和B应用部署在不同的服务器上，A调用B，是由Dubbo框架，创建出B服务对象的代理对象，放在A的JVM中。通过代理对象访问真实的目标对象的方法。</p><p><strong>底层通过动态代理实现数据的转换、数据的组装、请求的发送、数据的反序列化变为实例对象。此代理对象是由dubbo框架创建的，代理做的工作我们就不用做了，这些都由dubbo框架内部实现，可以理解为远程服务的调用对于程序员来说是透明的。</strong></p><p>我们要做的就是通过A去调用B的服务，具体底层具体怎么调用的，都是dubbo框架内部实现的。</p></li></ol><h3 id="dubbo支持的协议" tabindex="-1"><a class="header-anchor" href="#dubbo支持的协议" aria-hidden="true">#</a> Dubbo支持的协议</h3><h4 id="dubbo协议" tabindex="-1"><a class="header-anchor" href="#dubbo协议" aria-hidden="true">#</a> dubbo协议</h4><ol><li><p>Dubbo支持八种协议：</p><ul><li>dubbo</li><li>hessian</li><li>rmi</li><li>http</li><li>webservice</li><li>thrift</li><li>memcached</li><li>redis</li></ul><p>这八种协议也可以说是远程调用的方式。</p><p>dubbo官方推荐用dubbo协议，dubbo协议默认端口20880</p></li><li><p>dubbo协议特点</p><p>dubbo协议采用单一长连接和异步通讯，适合于小数据量高并发的服务调用，以及服务消费者机器数远大于服务提供者机器数的情况。</p></li><li><p>网络通信：</p><p>dubbo协议底层网络通信默认使用的是netty框架，性能非常优秀，官方推荐使用。</p><p>netty框架是网络通讯的框架</p><p>dubbo协议不适合传送大数据量的服务，比如传文件、传视频等，除非请求量很低。</p></li><li><p>使用dubbo协议</p><p><code>&lt;dubbo:protocol name=&quot;dubbo&quot; port=&quot;20880&quot;/&gt;</code></p><p>这句话写在spring的配置文件中。</p></li></ol><h4 id="长连接和短连接" tabindex="-1"><a class="header-anchor" href="#长连接和短连接" aria-hidden="true">#</a> 长连接和短连接</h4><ol><li><p>长连接</p><p><img src="/study/assets/image-20220107152751298.e3b11193.png" alt="image-20220107152751298"></p><p>网络连接一经建立，不关闭不销毁，一直打开。</p><p>消费者1、2、3都使用同一个网络通道进行传输，消费者1和服务器建立网络通道后，消费者2、3请求服务的时候，不需要再去建立网络通道。因为建立网络通道是比较耗时的。</p><p>MYSQL数据库底层使用的就是长连接的方式。</p></li><li><p>短连接</p><p><img src="/study/assets/image-20220107153019520.67669201.png" alt="image-20220107153019520"></p><p>每一个客户端应用去请求服务的时候都必须和服务器建立一个网络通道。一次请求完毕之后，建立的网络通道就会关闭，每次请求都需要重新建立网络通道。</p><p>短连接对于服务端来说，占用的资源少，因为使用完了之后会马上释放。</p><p>在互联网应用中，做web应用的时候，用户和服务器之间使用的是短连接的方式，而服务器和服务器之间用的是长连接的方式。</p><p><strong>比如说用户和消费者服务器之间使用的是短连接的方式，消费者服务器和服务提供者服务器之间使用的是长连接的方式。</strong></p></li></ol><h3 id="dubbo的组件" tabindex="-1"><a class="header-anchor" href="#dubbo的组件" aria-hidden="true">#</a> Dubbo的组件</h3><ol><li><p>主要是由五大部分组成</p><ul><li><p>容器--spring容器</p><p>容器指的是spring容器，由spring管理dubbo的各种对象。</p></li><li><p>dubbo服务的提供者</p></li><li><p>dubbo服务的消费者</p><p>其中服务提供者和服务消费者都是dubbo的程序</p></li><li><p>dubbo框架的注册中心</p><p>注册中心是一个单独的应用程序，负责管理dubbo服务的提供者和消费者的。注册中心是一个应用，可以用数据库来代替</p></li><li><p>dubbo框架的监控中心</p><p>监控中心是一个管理者，用来在后台的应用程序中管理消费者和提供者的，来记录消费者和提供者的调用情况的。</p><p>监控中心是可以没有的</p></li></ul></li><li><p><img src="/study/assets/image-20220107154427177.7be6f025.png" alt="image-20220107154427177"></p></li></ol><h3 id="使用dubbo的第一个项目" tabindex="-1"><a class="header-anchor" href="#使用dubbo的第一个项目" aria-hidden="true">#</a> 使用Dubbo的第一个项目</h3><ol><li><p>点对点的直连项目：消费者直接访问服务提供者，没有注册中心，消费者必须指定服务提供者的访问地址（url）</p></li><li><p>实现Provider即dubbo服务的提供者：提供某个功能，让消费者调用的。</p><p>步骤：</p><ul><li><p>新建web应用</p></li><li><p>导入jar：</p><ul><li>dubbo框架的jar：dubbo-2.5.3</li><li>网络通讯的jar包：netty</li><li>动态代理的相关包：javassist.jar</li><li>spring相关jar包：spring-*.jar（dubbo框架和spring是紧密结合在一起的）</li></ul><div class="language-xml ext-xml"><pre class="language-xml"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>dubbo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.6.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.netty<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>netty-all<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.1.72.Final<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- spring核心 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-context<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 做SPRING事务用到的。 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-tx<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-jdbc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-webmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.javassist<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>javassist<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.15.0-GA<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li><li><p><strong>定义实体类Weather，保存在网络中传输的数据，此类需要实现序列化接口</strong></p></li><li><p>定义服务的接口和实现类</p></li><li><p>定义spring的配置文件，也是dubbo服务提供者的配置文件</p><ul><li>声明服务的名称</li><li>暴露服务提供者的接口</li><li>声明服务接口的实现类对象</li></ul><div class="language-xml ext-xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>dubbo</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://dubbo.apache.org/schema/dubbo<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://dubbo.apache.org/schema/dubbo
       http://dubbo.apache.org/schema/dubbo/dubbo.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--
        声明服务的名称：自定义的名字，表示当前的服务提供者的。
        name:自定义的服务名称，一般可以使用项目名称，最好是唯一值。
        服务名称是由dubbo框架内部使用的。
    --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">dubbo:</span>application</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dubboProvider<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!--
        声明服务的接口信息，暴露服务
        interface:服务接口的全限定名称
        protocol:访问这个dubbo服务使用的协议，推荐使用dubbo
        registry：指定使用注册中心，点对点的方式中，不使用注册中心，赋值为N/A
        ref：指定接口实现类bean的id
    --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">dubbo:</span>service</span> <span class="token attr-name">interface</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.example.service.WeatherService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">protocol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dubbo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">registry</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>N/A<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>weatherService<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">dubbo:</span>service</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 声明服务的实现类对象，真正提供接口的功能实现 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>weatherService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.example.service.impl.WeatherServiceImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li><li><p>定义测试类，测试配置文件是否有效</p></li><li><p>修改web.xml，注册spring的监听器，让spring可以在web应用中使用。</p></li><li><p>导出接口和相关的类为一个jar文件，提供给消费者使用。</p></li></ul></li><li><p>实现消费者Consumer，调用服务提供者的功能</p><ul><li><p>新建Java项目</p></li><li><p>导入jar包</p><ul><li>dubbo框架的jar：dubbo-2.5.3</li><li>网络通讯的jar包：netty</li><li>动态代理的相关包：javassist.jar</li><li>spring相关jar包：spring-*.jar（dubbo框架和spring是紧密结合在一起的）</li><li>服务提供者的jar包</li></ul></li><li><p>定义spring配置文件</p><ul><li>声明服务的名称</li><li>声明要使用的服务，引用服务提供者</li></ul><div class="language-xml ext-xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>dubbo</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://dubbo.apache.org/schema/dubbo<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://dubbo.apache.org/schema/dubbo
       http://dubbo.apache.org/schema/dubbo/dubbo.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- dubbo消费者的配置文件--&gt;</span>

    <span class="token comment">&lt;!-- 1.声明服务的名称（声明服务的操作和服务提供者的一样）--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">dubbo:</span>application</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dubboConsumer1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!--
        2.声明要使用的dubbo服务（远程服务）
        interface:dubbo服务接口的全限定名称
        id：dubbo创建的代理对象的id，使用这个id访问代理对象
            - remoteWeatherService 就是dubbo创建的WeatherService接口的代理对象！！
        url：点对点访问中，访问远程服务的地址

    --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">dubbo:</span>reference</span> <span class="token attr-name">interface</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.example.service.WeatherService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>remoteWeatherService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dubbo://localhost:20880<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li><li><p>定义使用者类，调用服务提供者的功能，这是一个远程调用。</p><div class="language-java ext-java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyClient</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 创建spring容器</span>
        <span class="token class-name">String</span> config <span class="token operator">=</span> <span class="token string">&quot;dubbo-consumer.xml&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">// 从容器中获取远程的代理对象。</span>
        <span class="token class-name">ApplicationContext</span> applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//通过代理对象执行方法的调用，就像调用自己的方法一样</span>
        <span class="token class-name">WeatherService</span> remoteWeatherService <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">WeatherService</span><span class="token punctuation">)</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;remoteWeatherService&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Weather</span> weather <span class="token operator">=</span> remoteWeatherService<span class="token punctuation">.</span><span class="token function">queryWeather</span><span class="token punctuation">(</span><span class="token string">&quot;101010100&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>weather<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div></li></ul></li></ol><h3 id="使用接口作为独立项目" tabindex="-1"><a class="header-anchor" href="#使用接口作为独立项目" aria-hidden="true">#</a> 使用接口作为独立项目</h3><ol><li><p>消费者项目只导入一个接口的jar包。</p><p>根据这个接口的jar包，在配置文件中，声明出代理对象。</p><p>通过代理对象调用方法，就像调用自己的方法一样，实际消费者项目只导入了接口，根本没有方法的实现，方法的实现在别的服务器上。</p><p>这个接口的jar包可能有很多接口，那么就有很多需要实现的方法，这些接口的实现类以及实现的方法都部署在不同的服务器上。这就是微服务，各个服务部署在不同的服务器上，这就是分布式。</p><p>而导入消费者项目的只是接口jar包，根本没有将实现类以及实现方法导入！！</p><p>但是在消费者项目中却可以像调用自己本地的方法一样调用别的服务器的实现类的方法，通过RPC框架dubbo，底层网络通信对用户而言是透明的。</p><p>总结：消费者项目中，实现类以及实现类的方法根本就不需要，但是却能调用，就是通过dubbo。能调用部署在不同服务器上的不同实现类的方法。</p></li><li><p>而部署在不同服务器上的服务提供者，即实现类，这些服务提供者项目中，也要导入接口jar包，因为在服务提供者项目中，要暴露服务的接口信息，并声明服务接口的实现类对象，并把实现类对象，对接口进行赋值。也就是说服务提供者项目中，仍用到接口jar包，这就是使用接口作为独立项目，整个大的项目中，只通过接口jar包。</p><p>服务提供者项目中的配置文件做的事：</p><ul><li>声明服务名称</li><li>暴露接口</li><li>声明服务接口的实现类对象。</li><li>.....后面还有配置注册中心等。</li></ul></li></ol><h3 id="dubbo常用标签" tabindex="-1"><a class="header-anchor" href="#dubbo常用标签" aria-hidden="true">#</a> Dubbo常用标签</h3><h4 id="概述-1" tabindex="-1"><a class="header-anchor" href="#概述-1" aria-hidden="true">#</a> 概述</h4><ol><li><p>使用dubbo做项目开发的时候，一般都用配置文件的方式，而不用注解。因为这样只需要在一个配置文件中就能了解到当前项目用了哪些远程服务，那么就看消费者项目配置文件的<code>&lt;dubbo:reference&gt;</code>标签。</p><p>通过一个配置文件，就能在服务提供者项目中看到哪些服务是暴露的，通过<code>&lt;dubbo:service&gt;</code>标签。</p></li><li><p>Dubbo中常用标签，分为三个类别：公用标签，服务提供者标签，服务消费者标签。</p></li></ol><h4 id="公用标签" tabindex="-1"><a class="header-anchor" href="#公用标签" aria-hidden="true">#</a> 公用标签</h4><ol><li><p>配置应用信息：</p><p><code>&lt;dubbo:application name=&quot;服务的名称&quot;/&gt;</code></p><p>这个名称不是给我们开发人员使用的，是dubbo框架内部使用的，来区分这个服务是消费者还是服务提供者</p></li><li><p>配置注册中心</p><p><code>&lt;dubbo:registry address=&quot;ip:port&quot; protocol=&quot;协议&quot;/&gt;</code></p></li></ol><h4 id="服务提供者标签" tabindex="-1"><a class="header-anchor" href="#服务提供者标签" aria-hidden="true">#</a> 服务提供者标签</h4><ol><li><p>配置访问服务提供者的协议信息</p><p><code>&lt;dubbo:protocol name=&quot;dubbo&quot; port=&quot;20800&quot;/&gt;</code></p></li><li><p>配置暴露的服务接口</p><p><code>&lt;dubbo:server interface=&quot;服务接口名&quot; ref=&quot;服务实现对象&quot;/&gt;</code></p><p>暴露的服务可以被消费者使用，消费者可以通过这个暴露的服务接口基于动态代理创建代理对象。</p></li><li><p>配置服务接口的实现类对象</p><p><code>&lt;bean&gt;</code></p></li></ol><h4 id="服务消费者标签" tabindex="-1"><a class="header-anchor" href="#服务消费者标签" aria-hidden="true">#</a> 服务消费者标签</h4><ol><li><p>配置消费者引用远程服务</p><p><code>&lt;dubbo:reference interface=&quot;服务接口名&quot; id=&quot;服务引用bean的id&quot;/&gt;</code></p><p><strong>id表示的对象，即为dubbo框架创建的代理对象。</strong></p></li></ol><h3 id="常用配置属性" tabindex="-1"><a class="header-anchor" href="#常用配置属性" aria-hidden="true">#</a> 常用配置属性</h3><h4 id="check" tabindex="-1"><a class="header-anchor" href="#check" aria-hidden="true">#</a> check</h4><ol><li><p>Dubbo缺省会在启动时检查依赖的服务是否可用，不可用时会抛出异常，阻止spring初始化完成，以便上线时，能及早发现问题，默认check=true，通过check=&quot;false&quot;关闭检查。</p><p><img src="/study/assets/image-20220107224809995.a6409be9.png" alt="image-20220107224809995"></p><p>表示消费者在去访问一个dubbo服务之前，检查这个服务是否已启动。</p><p>但是有的时候在项目中先部署消费者，此时服务器提供者还没启动起来，那么这时候可以设置check=&quot;false&quot;</p></li></ol><h4 id="请求重试retries" tabindex="-1"><a class="header-anchor" href="#请求重试retries" aria-hidden="true">#</a> 请求重试retries</h4><ol><li><p>远程服务调用重试次数，不包括第一次调用，默认是2次，加上第一次一共3次</p><p><code>&lt;dubbo:reference retries=&quot;5&quot;/&gt;</code></p></li></ol><h2 id="第3章-注册中心" tabindex="-1"><a class="header-anchor" href="#第3章-注册中心" aria-hidden="true">#</a> 第3章 注册中心</h2><h3 id="概述-2" tabindex="-1"><a class="header-anchor" href="#概述-2" aria-hidden="true">#</a> 概述</h3><ol><li><p>注册中心，负责管理dubbo服务的提供者和消费者的，起到服务提供者和消费者的桥梁。</p><p>注册中心是一个软件，在项目中集中管理所有服务提供者和服务消费者。</p><p>注册中心可以检查dubbo服务是可用的还是不可用的。</p></li><li><p>用了注册中心，在配置文件中的url就不用写死了。</p><p><img src="/study/assets/image-20220108142917450.ef0c75b3.png" alt="image-20220108142917450"></p><p>如果某个dubbo服务坏掉了，可以由注册中心动态地进行替换和修改，这样的话，消费者就能使用另一个正确的dubbo服务地址。</p><p>注册中心管理服务，并且还能实现故障的处理。</p></li><li><p>为什么使用注册中心？</p><p>面对复杂的应用系统，需要管理大量的服务调用。</p><p>而且对于服务提供方和服务消费方来说，他们还可能兼具这两种角色，即可能一个服务器的应用既需要提供服务，也需要消费服务。通过将服务统一管理起来，可以有效地优化内部应用对服务发布、使用的流程和管理。服务注册中心可以通过特定协议来完成服务对外的统一。</p><p>多个服务注册到同一个注册中心，多个消费者、多个服务提供者都注册到同一个注册中心，管理起来。</p></li><li><p>Dubbo提供的注册中心有以下几种类型可选：</p><ul><li><p>Multicast注册中心：组播方式，在一个固定的IP地址段来发送dubbo服务的地址信息。</p></li><li><p>Redis注册中心：使用Redis作为注册中心</p><p>也就是在redis数据库中，来记录每一个dubbo服务的访问地址。</p></li><li><p>Simple注册中心：就是一个dubbo服务，作为注册中心，提供查找服务的功能</p></li><li><p>zookeeper注册中心：使用zookeeper作为注册中心。</p></li></ul><p>也就是说，消费者访问dubbo服务，得知道dubbo服务所在的地址即ip和端口，那么这个地址可以从注册中心中获取。项目中主要用zookeeper。</p></li></ol><h3 id="zookeeper概述" tabindex="-1"><a class="header-anchor" href="#zookeeper概述" aria-hidden="true">#</a> zookeeper概述</h3><ol><li><p>zookeeper是在分布式环境中，做服务协调和管理的。</p><p>是一个树形的目录服务，可用于生产环境。</p><p>zookeeper就像是windows的资源管理器，包含了所有的文件，都可以在这里找到，<strong>服务提供者和服务消费者都在注册中心登记。</strong></p><p>服务消费者使用的访问地址不会写死，而且注册中心使用心跳机制更新服务提供者的状态。</p><p>不能使用的服务提供者会自动从注册中心删除，服务消费者不会调用不能使用的服务。</p><p><img src="/study/assets/image-20220108154140030.d5508176.png" alt="image-20220108154140030"></p><p>通过目录的方式记录dubbo服务提供者和消费者的信息的。</p><p>比如根目录是dubbo目录，子目录是服务接口目录，再下一层是服务提供者和服务消费者信息，再下一层是服务提供者提供的服务的URL，和消费者访问服务的URL。</p><p>用目录的方式记录dubbo服务的提供者和消费者信息。</p></li><li><p>通过目录和子目录能够定位到唯一的dubbo服务。</p></li><li><p>zookeeper是基于Java环境的软件。</p><p>zookeeper管理的就是服务相关信息，服务提供者和服务消费者。</p><p>是分布式环境中，协调管理服务的应用，zookeeper本身是一个软件应用。</p></li><li><p><img src="/study/assets/image-20220108154510355.967310eb.png" alt="image-20220108154510355"></p><ul><li><p>先运行注册中心</p></li><li><p>启动dubbo服务</p></li><li><p>dubbo服务提供者向注册中心进行登记，在注册中心中维护了一个列表记录dubbo服务的URL</p><p>在注册中心中维护所有dubbo服务的可用的ip和端口</p></li><li><p>消费者先访问注册中心，进行一个订阅！</p><p>就是消费者要访问哪个dubbo服务，向注册中心做登记。</p></li><li><p>注册中心把对应的dubbo服务的URL信息发送给消费者。</p></li><li><p>消费者拿到dubbo服务的访问地址</p></li><li><p>消费者再拿到某一个地址（通过负载均衡来决定），就访问某一个dubbo服务</p></li></ul><p>这样dubbo服务的提供者和消费者是解耦合的。</p><p>注册中心默认每隔2秒钟，向dubbo服务发送请求，验证dubbo服务是否正常工作。如果某个dubbo服务没有响应，那么注册中心认为此dubbo服务宕掉了，不能用，那么注册中心会把之前登记的这个dubbo服务的URL信息删掉（如果消费者对此dubbo服务做了订阅，也就是登记，那么注册中心会把宕掉的这个dubbo服务的新的地址推送给消费者，这样消费者拿到的dubbo服务地址永远都是可用的）。这是注册中心的心跳机制。</p><p>避免某个dubbo服务宕掉了，消费者访问不了。</p></li></ol><h3 id="zookeeper使用" tabindex="-1"><a class="header-anchor" href="#zookeeper使用" aria-hidden="true">#</a> zookeeper使用</h3><h4 id="服务提供者" tabindex="-1"><a class="header-anchor" href="#服务提供者" aria-hidden="true">#</a> 服务提供者</h4><ol><li><p>新建web应用</p></li><li><p>导入jar：</p><ul><li>dubbo框架的jar：dubbo-2.5.3</li><li>网络通讯的jar包：netty</li><li>动态代理的相关包：javassist.jar</li><li>spring相关jar包：spring-*.jar（dubbo框架和spring是紧密结合在一起的）</li><li>zookeeper相关jar包：zkclient.jar zookeeper.jar</li></ul></li><li><p>定义实体类Weather，保存在网络中传输的数据，此类需要实现序列化接口</p></li><li><p>定义服务的接口和实现类</p></li><li><p>定义spring的配置文件，也是dubbo服务提供者的配置文件</p><ul><li>声明服务的名称</li><li>暴露服务提供者的接口</li><li>声明服务接口的实现类对象</li><li>声明注册中心的地址</li></ul><div class="language-xml ext-xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>dubbo</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://dubbo.apache.org/schema/dubbo<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans 
       http://www.springframework.org/schema/beans/spring-beans.xsd 
       http://dubbo.apache.org/schema/dubbo 
       http://dubbo.apache.org/schema/dubbo/dubbo.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    
    <span class="token comment">&lt;!--
       声明服务的名称：自定义的名字，表示当前的服务提供者的。
       name:自定义的服务名称，一般可以使用项目名称，最好是唯一值。
       服务名称是由dubbo框架内部使用的。
   --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">dubbo:</span>application</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dubboProvider1-zookeeper<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!--
        声明服务的接口信息，暴露服务
        interface:服务接口的全限定名称
        protocol:访问这个dubbo服务使用的协议，推荐使用dubbo
        registry：指定使用注册中心，点对点的方式中，不使用注册中心，赋值为N/A
        ref：指定接口实现类bean的id
    --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">dubbo:</span>service</span> <span class="token attr-name">interface</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.example.service.WeatherService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>weatherService<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">dubbo:</span>service</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--声明zookeeper注册中心的地址--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">dubbo:</span>registry</span> <span class="token attr-name">address</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zookeeper://localhost:2181<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!-- 声明服务的实现类对象，真正提供接口的功能实现 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>weatherService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.example.service.impl.WeatherServiceImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li><li><p>定义测试类，测试配置文件是否有效</p></li><li><p>修改web.xml，注册spring的监听器，让spring可以在web应用中使用。</p></li><li><p>导出接口和相关的类为一个jar文件，提供给消费者使用。</p></li></ol><h4 id="服务消费者" tabindex="-1"><a class="header-anchor" href="#服务消费者" aria-hidden="true">#</a> 服务消费者</h4><ol><li><p>新建Java项目</p></li><li><p>导入jar包</p><ul><li>dubbo框架的jar：dubbo-2.5.3</li><li>网络通讯的jar包：netty</li><li>动态代理的相关包：javassist.jar</li><li>spring相关jar包：spring-*.jar（dubbo框架和spring是紧密结合在一起的）</li><li>服务提供者的jar包(这个jar包里是接口，也就是消费者这边只有接口，没有具体的实现，但是仍然能够实现功能，这就是远程调用RPC)</li><li>zookeeper相关jar包：zkclient.jar zookeeper.jar</li></ul></li><li><p>定义spring配置文件</p><ul><li>声明服务的名称</li><li>声明要使用的服务，引用服务提供者</li><li>声明注册中心的地址</li></ul><div class="language-xml ext-xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>dubbo</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://dubbo.apache.org/schema/dubbo<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://dubbo.apache.org/schema/dubbo
       http://dubbo.apache.org/schema/dubbo/dubbo.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- dubbo消费者的配置文件--&gt;</span>

    <span class="token comment">&lt;!-- 1.声明服务的名称（声明服务的操作和服务提供者的一样）--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">dubbo:</span>application</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dubboConsumer1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!--
        2.声明要使用的dubbo服务（远程服务）
        interface:dubbo服务接口的全限定名称
        id：dubbo创建的代理对象的id，使用这个id访问代理对象
            - remoteWeatherService 就是dubbo创建的WeatherService接口的代理对象！！
        url：点对点访问中，访问远程服务的地址

    --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">dubbo:</span>reference</span> <span class="token attr-name">interface</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.example.service.WeatherService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>remoteWeatherService<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!-- 声明zookeeper注册中心信息--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">dubbo:</span>registry</span> <span class="token attr-name">address</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zookeeper://localhost:2181<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li><li><p>定义使用者类，调用服务提供者的功能，这是一个远程调用。</p></li></ol><h2 id="第4章-监控中心" tabindex="-1"><a class="header-anchor" href="#第4章-监控中心" aria-hidden="true">#</a> 第4章 监控中心</h2><h3 id="概述-3" tabindex="-1"><a class="header-anchor" href="#概述-3" aria-hidden="true">#</a> 概述</h3><ol><li><p>监控中心是dubbo框架提供好的一个web应用。</p><p>是一个后台，收集dubbo服务提供者和消费者的信息。</p></li><li><p>监控中心从注册中心收集服务提供者和消费者的信息。</p></li></ol><h3 id="步骤" tabindex="-1"><a class="header-anchor" href="#步骤" aria-hidden="true">#</a> 步骤</h3><ul><li>下载dubbo-admin.war包</li><li>部署到tomcat服务器即容器中，发布。</li><li>启动。</li><li>进入<code>http://localhost:8080/dubbo_admin_2_6_0_war/</code>页面管理</li></ul><p>监控中心能够获取到消费者和服务提供者的相关信息。</p><h2 id="第5章-负载均衡" tabindex="-1"><a class="header-anchor" href="#第5章-负载均衡" aria-hidden="true">#</a> 第5章 负载均衡</h2><h3 id="概述-4" tabindex="-1"><a class="header-anchor" href="#概述-4" aria-hidden="true">#</a> 概述</h3><ol><li><p>集群：</p><p>集群是一种计算机系统，是一种服务器结构，分布式可以理解为一种思想。把一组计算机，包括硬件和软件组织在一个网络中，相互连接起来共同完成某个工作，对用户来说是一个整体，集群对用户来说是透明的。</p></li><li><p>负载均衡：</p><p>负载均衡是以集群为前提的，英文名为load balance，意思就是将负载（工作任务）进行平衡，分摊到多个操作单元上进行执行。</p><p>对于网络应用而言，并不是一开始就需要负载均衡，当网络应用的访问量不断增长，单个处理单元无法满足负载需求的时候，网络应用流量将要出现瓶颈时，负载均衡才会起到作用。</p><p>一般通过一个或者多个前端负载均衡器（负载均衡服务器），将工作负载分发到后端一组服务器上，从而达到整个系统的高性能和高可用性。</p></li><li><p>负载均衡有两方面的含义：</p><ul><li>首先，单个重负载的工作分配到多台服务器做并行处理，每个服务器处理结束后，将结果汇总，返回给用户，系统处理能力得到大幅度提高。这是集群技术带来的优势。</li><li>大量的并发访问或数据流量分担到多台服务器分别处理，减少用户等待响应的时间。每个访问分配给不同的服务器处理。（不可能一台服务器承受大量用户请求，所以要将用户请求分摊到多台服务器，这就是负载均衡。）</li></ul></li><li><p>负载均衡服务器很贵，成本高，中小型企业可以通过软件的方式实现负载均衡。</p></li></ol><h3 id="dubbo负载均衡" tabindex="-1"><a class="header-anchor" href="#dubbo负载均衡" aria-hidden="true">#</a> Dubbo负载均衡</h3><h4 id="概述-5" tabindex="-1"><a class="header-anchor" href="#概述-5" aria-hidden="true">#</a> 概述</h4><p>dubbo提供了多种负载均衡策略，缺省为random随机调用。</p><h4 id="ramdom-loadbalance" tabindex="-1"><a class="header-anchor" href="#ramdom-loadbalance" aria-hidden="true">#</a> Ramdom LoadBalance</h4><p>当请求提交给dubbo后，dubbo生成一个随机数，这个随机数对应于一个后台的服务器，通过这种方式做负载均衡，这也是dubbo框架默认的方式。</p><p>调用量越大，分布越均匀。</p><p>还可以调整请求发给某一个服务器的权重。</p><p><strong>调用量大的时候</strong>，可以用这种方式。</p><h4 id="roundrobin-loadbalance" tabindex="-1"><a class="header-anchor" href="#roundrobin-loadbalance" aria-hidden="true">#</a> RoundRobin LoadBalance</h4><p>轮询。在后台多个服务器的性能差别大的时候会出现问题，<strong>性能慢的服务器积累的没处理的请求会随着时间越来越多。</strong></p><p>后台的服务器的<strong>性能差不多</strong>的时候可以用这种方式，那么每台服务器处理的请求差不多，积累的没处理的请求也差不多。</p><h4 id="leastactive-loadbalance" tabindex="-1"><a class="header-anchor" href="#leastactive-loadbalance" aria-hidden="true">#</a> LeastActive LoadBalance</h4><p>最少活跃调用数，活跃数指调用前后技术差。比如1、2、3台服务器，每台在开始都分配了10个请求，1号处理了9个，差值为1，2号处理了5个，差值为5，3号处理了7个，差值为3，说明2号服务器的性能相对更弱。</p><p>在以后的请求分配中，分配给性能弱的服务器的请求会越少。</p><p>服务器的<strong>性能差异比较大</strong>的时候，可以用这种方式。</p><h4 id="consistencehash-loadbalance" tabindex="-1"><a class="header-anchor" href="#consistencehash-loadbalance" aria-hidden="true">#</a> ConsistenceHash LoadBalance</h4><p><img src="/study/assets/image-20220108194148535.8bd7f2b0.png" alt="image-20220108194148535"></p><p>比如说1、2、3、4请求分给A服务器</p><p>5、6、7、8请求分给B服务器</p><p>9、10、11、12请求分给C服务器</p><p>当B服务器宕掉了之后，5、6分给A，7、8分给C。</p><p>让每个服务器接收到的请求仍然保持均衡，发生故障之后，对用户来说，波动小。因为会把请求均匀地分配给剩下的服务器</p><h3 id="配置方式" tabindex="-1"><a class="header-anchor" href="#配置方式" aria-hidden="true">#</a> 配置方式</h3><ol><li><img src="/study/assets/image-20220108194925385.facd82db.png" alt="image-20220108194925385"></li></ol><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 64005626+shaileneF@users.noreply.github.com">shailene</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/study/assets/app.4e5a7100.js" defer></script>
  </body>
</html>
